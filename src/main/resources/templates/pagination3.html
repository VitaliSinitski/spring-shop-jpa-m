<div class="pagination">
    <form action="/products" method="get">
        <input type="hidden" name="name" th:value="${filter.name}"/>
        <input type="hidden" name="price" th:value="${filter.price}"/>
        <input type="hidden" name="categoryId" th:value="${filter.categoryId}"/>
        <input type="hidden" name="producerId" th:value="${filter.producerId}"/>
        <input type="hidden" name="sortField" th:value="${sortField}"/>
        <input type="hidden" name="sortDirection" th:value="${sortDirection}"/>
        <input type="hidden" name="size" th:value="${page.size}"/>

        <!-- Previous page button -->
        <div th:if="${page.number > 0}" style="display: inline-block;">
            <button type="submit" name="page" th:value="${page.number - 1}" aria-label="Previous">
                <span aria-hidden="true">&laquo; Prev</span>
            </button>
        </div>

        <!-- First page button -->
        <div th:if="${page.number >= 5}" style="display: inline-block;">
            <button type="submit" name="page" th:value="0">0</button>
            <span>&hellip;</span>
        </div>

        <!-- Middle page buttons -->
        <div th:each="i : ${#numbers.sequence(Math.max(0, page.number - 2), Math.min(page.totalPages - 1, page.number + 2))}"
             style="display: inline-block;">
            <button type="submit" name="page" th:value="${i}" th:text="${i}"
                    th:class="${i==page.number ? 'active' : ''}"></button>
        </div>

        <!-- Last page button -->
        <div th:if="${page.number <= page.totalPages - 6}" style="display: inline-block;">
            <span>&hellip;</span>
            <button type="submit" name="page" th:value="${page.totalPages - 1}"
                    th:text="${page.totalPages - 1}"></button>
        </div>

        <!-- Next page button -->
        <div th:if="${page.number < page.totalPages - 1}" style="display: inline-block;">
            <button type="submit" name="page" th:value="${page.number + 1}" aria-label="Next">
                <span aria-hidden="true">Next &raquo;</span>
            </button>
        </div>
    </form>
</div>
